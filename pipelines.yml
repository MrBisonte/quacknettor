sources:
  pg_local:
    type: postgres
    name: pgsrc
    # Fully configurable via environment variables
    conn: "dbname=__ENV:PG_DATABASE user=__ENV:PG_USER host=__ENV:PG_HOST port=5432 password=__ENV:PG_PASSWORD"
    object: "public.my_table"

  demo_parquet_in:
    type: parquet
    path: "./data/inbound/telco_churn_sample.parquet"

  # Example Snowflake source
  snowflake_prod:
    type: snowflake
    conn: "user=myuser password=__ENV:SF_PASSWORD account=myaccount warehouse=mywh database=mydb schema=public"
    object: "mydb.public.mytable"

targets:
  parquet_local_out:
    type: parquet
    path: "./out/my_table.parquet"
    mode: overwrite
    compression: zstd

  pg_local_out:
    type: postgres
    name: pgtgt
    conn: "dbname=__ENV:PG_DATABASE user=__ENV:PG_USER host=__ENV:PG_HOST port=5432 password=__ENV:PG_PASSWORD"
    table: "public.my_table_copy"
    mode: overwrite

  snowflake_out:
    type: parquet
    path: "./out/sf_dump.parquet"
    mode: overwrite
